<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>tShop - Stores</title>
    </h:head>
    <h:body>
        <ui:composition template="./commonLayout.xhtml">
            <ui:define name="content">

                <section class="breadcrumb-wrapper">
                    <div class="container">
                        <div class="row">
                            <div class="col-xs-6">
                                <h2>tShop</h2>
                                <p>Our Stores</p>
                            </div>
                            <div class="col-xs-6">
                                <ol class="breadcrumb">
                                    <li><h:link outcome="index" value="Home"/></li>
                                    <li class="active">Our Stores</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="map-wrapper">
                    <div id="map-canvas"></div>
                    <div id="map-tooltip"></div>
                </div>

                <section class="content eshop">
                    <div class="container">
                        <div class="stores">

                            <div class="row">
                                <div class="col-sm-7">
                                    <h2>Let's check our Stores</h2>
                                </div>
                                <div class="col-sm-5">
                                    <form class="form-inline">
                                        <div class="form-group">
                                            <label for="change-region">Select city:</label>
                                            <select class="form-control" id="change-region">
                                                <option value="" disabled="true">Select a city</option>
                                                <c:forEach items="#{storeController.getCities()}" var="city" varStatus="cityIndex">
                                                    <option value="#{cityIndex.index+1}" selected='#{request.getParameter("selectedCity").equals(city)?"true":""}'>#{city}</option>
                                                </c:forEach>
                                            </select>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="tabs" id="tabs-regions">
                                <ul class="nav nav-tabs hidden" role="tablist">                                    
                                    <c:forEach items="#{storeController.getCities()}" var="city" varStatus="cityIndex">
                                        <li role="presentation"><a href="#region-#{cityIndex.index+1}" role="tab" data-toggle="tab" aria-controls="region-#{cityIndex.index+1}">#{city}</a></li>
                                    </c:forEach>
                                </ul>
                                <div class="tab-content">
                                    <c:forEach items="#{storeController.getCities()}" var="city" varStatus="cityIndex">
                                        <div role="tabpanel" class='tab-pane #{request.getParameter("selectedCity").equals(city) ? "active in" : ""}' id="region-#{cityIndex.index+1}">
                                            <c:forEach items="#{storeController.getStores()}" var="store" varStatus="storeIndex">
                                                <c:if test="#{store.city.equals(city)}">
                                                    <div class="default-style store row row-no-padding" id="marker-#{cityIndex.index+1}">
                                                        <div class="col-sm-7">
                                                            <div class="store-body">
                                                                <input type="hidden" name="storeName" value="#{store.storeName}"/>
                                                                <input type="hidden" name="storeAddress" value="#{store.storeAddress}"/>
                                                                <input type="hidden" name="storeLong" value="#{store.longitude}"/>
                                                                <input type="hidden" name="storeLat" value="#{store.latitude}"/>
                                                                <h3>#{store.storeName}</h3>
                                                                <p>#{store.descriptions}</p>
                                                                <div class="row">
                                                                    <ul class="list-unstyled col-sm-6">
                                                                        <li><i class="fa fa-home"></i> <b>#{store.storeAddress}</b></li>
                                                                        <li><i class="fa fa-user"></i> <b>#{store.contactPerson}</b></li>
                                                                        <li><i class="fa fa-phone"></i> <b>${store.phone}</b></li>
                                                                    </ul>
                                                                    <ul class="list-unstyled grey-color col-sm-6">
                                                                        <li><i class="fa fa-credit-card"></i> Credit Card payment</li>
                                                                        <li><i class="fa fa-money"></i> Cash payment</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-5">
                                                            <div class="store-image">
                                                                <h:graphicImage name="#{store.storeImages}" alt="#{store.storeName}" class="img-responsive"/>
                                                                <div class="store-opening-hours">
                                                                    <ul class="list-unstyled">
                                                                        <li><span>Mon</span> 8:00 - 20:00</li>
                                                                        <li><span>Tue</span> 8:00 - 20:00</li>
                                                                        <li><span>Wed</span> 8:00 - 20:00</li>
                                                                        <li><span>Thu</span> 8:00 - 20:00</li>
                                                                        <li><span>Fri</span> 8:00 - 20:00</li>
                                                                        <li><span>Sat</span> 12:00 - 20:00</li>
                                                                        <li><span>Sun</span> Closed</li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </c:if>
                                            </c:forEach>                                            
                                        </div>
                                    </c:forEach>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>
            </ui:define>
        </ui:composition>
    </h:body>
</html>

